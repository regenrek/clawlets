---
title: Deploy credentials
description: Manage local deploy creds and runner-assisted secret submit flow.
---

Deploy credentials are local-only operator tokens in `.clawlets/env`. They are used by
bootstrap, infra commands, and doctor checks. They are not stored in Convex as secret
values.

UI route: `/<projectSlug>/security/api-keys`

## Keys managed in the UI

- `HCLOUD_TOKEN` (Hetzner, recommended path)
- `GITHUB_TOKEN` (optional, often needed for private base repos)
- `SOPS_AGE_KEY_FILE`

AWS keys are available for the experimental provider path:

- `AWS_ACCESS_KEY_ID`
- `AWS_SECRET_ACCESS_KEY`
- `AWS_SESSION_TOKEN` (optional)

## Recommended flow

<Steps>
  <Step>
    Open Project credentials at <code>/$projectSlug/security/api-keys</code>.
  </Step>
  <Step>
    Click <strong>Find</strong> to detect an existing operator age key, or <strong>Generate</strong> to create one.
  </Step>
  <Step>
    Fill provider creds. Recommended production path: set <code>HCLOUD_TOKEN</code>{" "}
    for Hetzner.
  </Step>
  <Step>
    Click <strong>Save</strong>.
  </Step>
  <Step>
    Reopen Setup and confirm <code>Provider Tokens</code> step is unlocked/completed.
  </Step>
</Steps>

Get Hetzner API token:
https://docs.hetzner.com/cloud/api/getting-started/generating-api-token

<Callout type="warning" title="AWS support is experimental">
  AWS credentials are only needed when the host uses
  <code>provisioning.provider=aws</code>. That path is not the recommended production
  baseline.
</Callout>

## Browser to runner submit path

When you click Save, the dashboard queues a runner command (`env apply-json`) and sends
credential values directly to the local runner submit endpoint when available:

- endpoint: `POST http://127.0.0.1:<localSecretsPort>/secrets/submit`
- header: `x-clawlets-nonce: <localSecretsNonce>`
- payload: queued job id + creds keys/values

Runner capability requirements:

- `supportsLocalSecretsSubmit = true`
- valid `localSecretsPort` (`1024..65535`)
- non-empty `localSecretsNonce`

If local submit is unavailable, runner falls back to prompt/input flow.

For handshake and protocol details: [Runner Agent](/operations/runner-agent).

## Verify

- In UI, saved keys show status `set`.
- Setup `Provider Tokens` step marks complete.
- Optional CLI check via runner:

```bash
clawlets env show --json
```

## Troubleshooting

### "Unable to read deploy creds status. Check runner."

- Runner offline, unreachable, or not paired with project.
- Start/restart runner and re-open the page.

### "Runner local submit failed"

- Local submit endpoint was unreachable, nonce mismatch, or request rejected.
- Keep runner running with correct `--dashboardOrigin` and nonce.
- Retry save; prompt fallback can still complete updates.

### Credentials still unset in Setup

- Confirm provider-specific required keys are set:
  - Hetzner: `HCLOUD_TOKEN`
  - AWS (experimental): `AWS_ACCESS_KEY_ID` + `AWS_SECRET_ACCESS_KEY`
- Confirm `SOPS_AGE_KEY_FILE` points to a valid operator age key file.
